<!doctype html>
<html lang="pl">
  <head>
    <meta charset="utf-8" />
    <title>Konfigurator maszynowni ‚Äì TOP-INSTAL</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- CSS -->
    <link rel="stylesheet" href="configurator.css">
    <link rel="stylesheet" href="configurator-v2-flat.css">
    <link rel="stylesheet" href="../kalkulator/css/error-system.css">
    <link rel="stylesheet" href="../kalkulator/css/onboarding-modal.css">

    <!-- üÜï MOBILE REDESIGN CSS -->
    <link rel="stylesheet" href="../kalkulator/css/mobile-redesign.css">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            
    <!-- JavaScript -->
    <script src="configurator-unified.js"></script>
  </head>
  <body>
    <!-- Widok konfiguratora maszynowni ≈Çadowany do calculator.html -->
    <div id="configurator-view" class="results-view visible">
      <!-- KONFIGURATOR MASZYNOWNI ‚Äì modu≈Çowy, montowany w wynikach -->
      <section id="section-configurator" class="machine-room-configurator-section glass-box">
        <div
          id="configurator-root"
          class="configurator-mount"
          data-config-source="results"
        >
          <!-- Konfigurator - struktura zgodna z configurator-unified.js -->
          <div id="configurator-app" class="configurator-container">

            <!-- STICKY PASEK Z WYBRANYMI KOMPONENTAMI -->
            <div class="configurator-selections-bar" id="configurator-selections-bar">
              <div class="selections-inner">
                <div class="selection-item" data-type="pompa">
                  <span class="selection-label">Pompa ciep≈Ça:</span>
                  <span class="selection-value">‚Äî</span>
                </div>
                <div class="selection-item" data-type="cwu">
                  <span class="selection-label">Zasobnik CWU:</span>
                  <span class="selection-value">‚Äî</span>
                </div>
                <div class="selection-item" data-type="bufor">
                  <span class="selection-label">Bufor CO:</span>
                  <span class="selection-value">‚Äî</span>
                </div>
                <div class="selection-item" data-type="cyrkulacja">
                  <span class="selection-label">Cyrkulacja CWU:</span>
                  <span class="selection-value">‚Äî</span>
                </div>
                <div class="selection-item" data-type="service">
                  <span class="selection-label">Service Cloud:</span>
                  <span class="selection-value">‚Äî</span>
                </div>
                <div class="selection-item" data-type="posadowienie">
                  <span class="selection-label">Posadowienie:</span>
                  <span class="selection-value">‚Äî</span>
                </div>
                <div class="selection-item" data-type="reduktor">
                  <span class="selection-label">Reduktor:</span>
                  <span class="selection-value">‚Äî</span>
                </div>
                <div class="selection-item" data-type="uzdatnianie">
                  <span class="selection-label">Uzdatnianie:</span>
                  <span class="selection-value">‚Äî</span>
                </div>
              </div>
            </div>

            <!-- Placeholder dla sticky selections bar (zapobiega skokowi tre≈õci) -->
            <div class="selections-sticky-placeholder" id="selections-sticky-placeholder"></div>

            <!-- Kontener z krokami -->
            <div id="configurator-steps">
              <!-- KROK 1: POMPA CIEP≈ÅA -->
              <section class="config-step section-container" data-step-key="pompa">
                <div class="section-header">
                  <div class="section-header-content">
                    <div class="section-icon">‚ö°</div>
                    <div>
                      <div class="section-step">KROK 1/9</div>
                      <h2 class="section-title">Pompa ciep≈Ça</h2>
                      <p class="section-description">
                        Na podstawie oblicze≈Ñ rekomendujemy pompƒô o odpowiedniej mocy. Wybierz preferowany model.
                      </p>
                    </div>
                  </div>
                </div>
                <div class="options-grid">
                  <!-- Karty bƒôdƒÖ renderowane dynamicznie przez configurator-unified.js -->
                </div>
                <div class="recommendation-note">
                  <p><strong>Wynik kalkulacji:</strong> Rekomendowana warto≈õƒá zostanie wy≈õwietlona po obliczeniach.</p>
                </div>
              </section>

              <!-- KROK 2: ZASOBNIK CWU -->
              <section class="config-step section-container" data-step-key="cwu">
                <div class="section-header">
                  <div class="section-header-content">
                    <div class="section-icon">üíß</div>
                    <div>
                      <h2 class="section-title">Zasobnik CWU</h2>
                      <p class="section-description">
                        Rekomendowana pojemno≈õƒá zasobnika zostanie wy≈õwietlona po obliczeniach. Wybierz rodzaj wyko≈Ñczenia wewnƒôtrznego.
                      </p>
                    </div>
                  </div>
                </div>
                <div class="options-grid">
                  <!-- Karty bƒôdƒÖ renderowane dynamicznie przez configurator-unified.js -->
                </div>
                <div class="recommendation-note">
                  <p><strong>Wynik kalkulacji:</strong> Rekomendowana warto≈õƒá zostanie wy≈õwietlona po obliczeniach.</p>
                </div>
              </section>

              <!-- KROK 3: BUFOR CO -->
              <section class="config-step section-container" data-step-key="bufor">
                <div class="section-header">
                  <div class="section-header-content">
                    <div class="section-icon">üì¶</div>
                    <div>
                      <h2 class="section-title">Bufor CO</h2>
                      <p class="section-description">
                        Bufor centralnego ogrzewania stabilizuje pracƒô pompy i zwiƒôksza jej ≈ºywotno≈õƒá.
                      </p>
                    </div>
                  </div>
                </div>
                <div class="options-grid">
                  <!-- Karty bƒôdƒÖ renderowane dynamicznie przez configurator-unified.js -->
                </div>
                <div class="recommendation-note">
                  <p><strong>Wynik kalkulacji:</strong> Rekomendowana pojemno≈õƒá zostanie wy≈õwietlona po obliczeniach.</p>
                </div>
              </section>

              <!-- KROK 4: CYRKULACJA CWU -->
              <section class="config-step section-container" data-step-key="cyrkulacja">
                <div class="section-header">
                  <div class="section-header-content">
                    <div class="section-icon">üîÑ</div>
                    <div>
                      <h2 class="section-title">Cyrkulacja CWU</h2>
                      <p class="section-description">
                        System cyrkulacji zapewnia natychmiastowy dostƒôp do ciep≈Çej wody.
                      </p>
                    </div>
                  </div>
                </div>
                <div class="options-grid">
                  <!-- Karty bƒôdƒÖ renderowane dynamicznie przez configurator-unified.js -->
                </div>
              </section>

              <!-- KROK 5: SERVICE CLOUD -->
              <section class="config-step section-container" data-step-key="service">
                <div class="section-header">
                  <div class="section-header-content">
                    <div class="section-icon">‚òÅÔ∏è</div>
                    <div>
                      <h2 class="section-title">Service Cloud</h2>
                      <p class="section-description">
                        Zdalne monitorowanie i serwis instalacji przez profesjonalist√≥w.
                      </p>
                    </div>
                  </div>
                </div>
                <div class="options-grid">
                  <!-- Karta bƒôdzie renderowana dynamicznie przez configurator-unified.js -->
                </div>
              </section>

              <!-- KROK 6: POSADOWIENIE -->
              <section class="config-step section-container" data-step-key="posadowienie">
                <div class="section-header">
                  <div class="section-header-content">
                    <div class="section-icon">üèóÔ∏è</div>
                    <div>
                      <h2 class="section-title">Posadowienie jednostki zewnƒôtrznej</h2>
                      <p class="section-description">
                        Spos√≥b monta≈ºu jednostki zewnƒôtrznej pompy ciep≈Ça.
                      </p>
                    </div>
                  </div>
                </div>
                <div class="options-grid">
                  <!-- Karty bƒôdƒÖ renderowane dynamicznie przez configurator-unified.js -->
                </div>
              </section>

              <!-- KROK 7: REDUKTOR -->
              <section class="config-step section-container" data-step-key="reduktor">
                <div class="section-header">
                  <div class="section-header-content">
                    <div class="section-icon">üîß</div>
                    <div>
                      <h2 class="section-title">Reduktor ci≈õnienia</h2>
                      <p class="section-description">
                        Reduktor chroni instalacjƒô przed zbyt wysokim ci≈õnieniem wody.
                      </p>
                    </div>
                  </div>
                </div>
                <div class="options-grid">
                  <!-- Karta bƒôdzie renderowana dynamicznie przez configurator-unified.js -->
                </div>
              </section>

              <!-- KROK 8: UZDATNIANIE WODY -->
              <section class="config-step section-container" data-step-key="woda">
                <div class="section-header">
                  <div class="section-header-content">
                    <div class="section-icon">üíß</div>
                    <div>
                      <h2 class="section-title">Stacja uzdatniania wody</h2>
                      <p class="section-description">
                        Ochrona instalacji przed kamieniem i korozjƒÖ.
                      </p>
                    </div>
                  </div>
                </div>
                <div class="options-grid">
                  <!-- Karty bƒôdƒÖ renderowane dynamicznie przez configurator-unified.js -->
                </div>
              </section>

              <!-- KROK 9: PODSUMOWANIE -->
              <section class="config-step" data-step-key="summary">
                <div class="summary-header">
                  <h1>Podsumowanie konfiguracji</h1>
                  <p>Sprawd≈∫ wybrane komponenty przed z≈Ço≈ºeniem zam√≥wienia</p>
                  <div class="summary-badge">Kompletna konfiguracja maszynowni</div>
                </div>
                <table class="summary-table">
                  <tbody id="summary-rows">
                    <!-- Wype≈Çniane przez configurator-unified.js -->
                  </tbody>
                </table>
                <div class="summary-actions">
                  <button class="btn btn-primary" data-action="download-pdf">
                    Pobierz raport PDF
                  </button>
                  <button class="btn" data-action="send-email">
                    Wy≈õlij na email
                  </button>
                  <button class="btn" data-action="print">
                    Drukuj
                  </button>
                  <button class="btn" data-action="back-to-config">
                    Wr√≥ƒá do konfiguracji
                  </button>
                </div>
              </section>
            </div>

            <!-- Nawigacja -->
            <div class="step-nav">
              <button type="button" class="btn-step" id="nav-prev" disabled>‚Üê Wstecz</button>
              <button type="button" class="btn-step btn-next" id="nav-next">Dalej ‚Üí</button>
            </div>
          </div>
        </div>
      </section>

      <!-- PRZYCISKI FUNKCJONALNE (dla konfiguratora) -->
      <div class="results-actions glass-box">
        <div class="action-row primary-actions">
          <button type="button" id="download-pdf-btn">Pobierz raport PDF</button>
        </div>

        <!-- FORMULARZ KONTAKTOWY DLA PDF (ukryty domy≈õlnie) -->
        <div id="pdf-contact-form" class="pdf-contact-form hidden">
          <div class="contact-form-content">
            <div class="form-header">
              <h4><i class="fas fa-envelope"></i> Otrzymaj pe≈Çny raport energetyczny</h4>
              <p>Pe≈Çny raport energetyczny z doborem mocy pompy otrzymasz drogƒÖ mailowƒÖ</p>
            </div>

            <div class="form-fields">
              <div class="form-field">
                <label for="customer-email">Email <span class="required">*</span></label>
                <input
                  type="email"
                  id="customer-email"
                  class="contact-input"
                  placeholder="twoj@email.pl"
                  required
                />
              </div>

              <div class="form-field">
                <label for="customer-postal-code">Kod pocztowy <span class="required">*</span></label>
                <input
                  type="text"
                  id="customer-postal-code"
                  class="contact-input"
                  placeholder="00-000"
                  maxlength="6"
                  required
                />
                <small class="field-note">Dla cel√≥w statystycznych</small>
              </div>
            </div>

            <div class="form-actions">
              <button class="action-btn primary full-width" onclick="collectCustomerData()">
                <i class="fas fa-paper-plane"></i> Odbierz raport cieplny PDF
              </button>
              <button class="action-btn cancel-btn" onclick="hidePDFContactForm()">
                <i class="fas fa-times"></i> Anuluj
              </button>
            </div>
          </div>
        </div>

        <div class="action-row secondary-actions">
          <button class="action-btn secondary" onclick="goBackToForm()">
            <i class="fas fa-arrow-left"></i> Wr√≥ƒá do formularza
          </button>
          <button class="action-btn tertiary" onclick="startNewCalculation()">
            <i class="fas fa-calculator"></i> Nowe obliczenie
          </button>
        </div>
      </div>
    </div>

    <!-- üÜï MOBILE CONTROLLER -->
    <script src="../kalkulator/js/mobileController.js"></script>
  </body>
</html>
